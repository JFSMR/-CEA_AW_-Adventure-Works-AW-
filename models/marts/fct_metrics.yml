version: 2

models:
  - name: fct_sales_metrics
    description: >
      Final fact model that references `int_metrics_sales`, containing calculated
      sales metrics including gross and net totals, order data, and sales-related
      foreign keys.
      Acts as an interface layer between the intermediate metrics and reporting tools.

    columns:
      - name: sales_item_sk
        description: Surrogate key for the sales item
        tests:
          - not_null

      - name: sales_order_detail_pk
        description: Primary key of the sales order detail

      - name: sales_order_fk
        description: Foreign key to the sales order

      - name: product_fk
        description: Foreign key to the product

      - name: specialoffer_fk
        description: Foreign key to the special offer

      - name: customer_fk
        description: Foreign key to the customer

      - name: territory_fk
        description: Foreign key to the sales territory

      - name: address_fk
        description: Foreign key to the customer's address

      - name: creditcard_fk
        description: Foreign key to the customer's credit card

      - name: salesperson_fk
        description: Foreign key to the salesperson

      - name: order_quantity
        description: Quantity ordered

      - name: unit_price
        description: Price per unit at time of sale

      - name: discount
        description: Discount applied to the unit price (as a decimal)

      - name: gross_total
        description: Gross revenue before discount = unit_price * order_quantity

      - name: net_total
        description: Net revenue after discount = unit_price * order_quantity * (1 - discount)

      - name: status
        description: Status of the order

      - name: sub_total
        description: Subtotal of the order as recorded in ERP

      - name: total_due
        description: Final amount due as recorded in ERP

      - name: order_date
        description: Date of the order
