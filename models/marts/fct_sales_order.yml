version: 2

models:
  - name: fct_sales_order
    description: >
      Final fact model for sales orders. Aggregates and computes key metrics
      such as gross/net totals and total quantity per order, enriched with
      customer, product, credit card, and sales reason attributes.
    columns:
      - name: sales_order_fact_sk
        description: Surrogate key uniquely identifying each sales order fact row.
        tests:
          - unique
          - not_null

      - name: sales_order_fk
        description: Primary key referencing the original sales order.
        tests:
          - not_null

      - name: customer_fk
        description: Foreign key referencing the customer.
        tests:
          - not_null

      - name: address_fk
        description: Foreign key referencing the address for the order.

      - name: creditcard_fk
        description: Foreign key referencing the credit card used.

      - name: product_fk
        description: Foreign key referencing the sold product.
        tests:
          - not_null

      - name: sales_reason_fk
        description: Foreign key referencing the sales reason.

      - name: status
        description: Status of the order at the time of processing.
        tests:
          - accepted_values:
              values: [1, 2, 3, 4, 5]  # Ajuste conforme seu dicion√°rio de status

      - name: order_date
        description: Date the sales order was created.
        tests:
          - not_null

      - name: name_reason
        description: Description or title of the sales reason.

      - name: type_reason
        description: Category of the sales reason.

      - name: card_type
        description: Credit card type used in the order.

      - name: card_number
        description: Masked number or identifier of the card used.

      - name: total_orders
        description: Count of distinct sales orders (typically 1 per row).
        tests:
          - not_null

      - name: total_quantity
        description: Total quantity of products in the order.

      - name: gross_total
        description: Gross total value of the order (before discounts).

      - name: net_total
        description: Net total value of the order (after applying discounts).
