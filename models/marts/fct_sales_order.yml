version: 2

models:
  - name: fct_sales_order
    description: >
      Final fact model containing enriched and aggregated sales order data including total orders, quantities, 
      gross and net revenue, and sales reasons. 
      It serves as a foundation for sales performance analysis and reporting.
    columns:
      - name: sales_order_fact_sk
        description: Surrogate key uniquely identifying each sales order fact row.
        tests:
          - not_null
      - name: sales_order_fk
        description: Primary key of the original sales order.
        tests:
          - not_null
      - name: customer_fk
        description: Foreign key to the customer who placed the order.
        tests:
          - not_null
      - name: address_fk
        description: Foreign key to the order's shipping address.
        tests:
          - not_null
      - name: creditcard_fk
        description: Foreign key to the credit card used.
      - name: product_fk
        description: Foreign key to the product included in the sales order.
        tests:
          - not_null
      - name: sales_reason_fk
        description: Foreign key to the sales reason associated with the order.
      - name: status
        description: Status code indicating the stage of the sales order.
        tests:
          - not_null
      - name: order_date
        description: Date the order was placed.
        tests:
          - not_null
      - name: name_reason
        description: Name label describing the reason for the sale.
      - name: type_reason
        description: Categorical type of the sales reason (e.g., Marketing, Campaign).
      - name: card_type
        description: Type of credit card used in the transaction.
      - name: card_number
        description: Anonymized card number associated with the payment.
      - name: unit_price
        description: Price of a single product unit in the order.
      - name: discount
        description: Percentage discount applied to the product unit.
      - name: total_orders
        description: Count of distinct orders aggregated for the fact row.
        tests:
          - not_null
      - name: total_quantity
        description: Sum of all product quantities in the sales order.
      - name: gross_total
        description: Aggregated total value of the sales order before discounts.
      - name: net_total
        description: Aggregated total value of the sales order after applying discounts.
      -  name: order_quantity
         description: These are ordering orders responsible for the metrics

