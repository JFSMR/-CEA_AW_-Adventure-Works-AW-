version: 2

models:
  - name: int_fct_sales_order
    description: >
      Intermediate model that joins sales order headers, item-level details, credit card information, and sales reason data 
      to prepare a unified dataset for calculating sales order metrics.
    columns:
      - name: sales_order_fk
        description: Primary key of the sales order from the header table.
        tests:
          - not_null
      - name: customer_fk
        description: Foreign key referencing the customer placing the order.
        tests:
          - not_null
      - name: address_fk
        description: Foreign key referencing the shipping address of the order.
        tests:
          - not_null
      - name: creditcard_fk
        description: Foreign key referencing the credit card used for the transaction.
      - name: salesperson_fk
        description: Foreign key referencing the salesperson assigned to the order.
      - name: status
        description: Order status code (e.g., in progress, completed).
        tests:
          - not_null
      - name: order_date
        description: Date when the sales order was placed.
        tests:
          - not_null
      - name: gross_total_by_order
        description: Total gross value of the sales order before applying any discounts.
      - name: net_total_by_order
        description: Total net value of the sales order after applying discounts.
      - name: total_quantity_by_order
        description: Total quantity of items in the sales order.
      - name: sales_reason_fk
        description: Foreign key referencing the reason for the sale, if applicable.
      - name: name_reason
        description: Name describing the reason for the sale (e.g., marketing campaign).
      - name: type_reason
        description: Type/category of the sales reason (e.g., Promotion, Upsell).
      - name: card_type
        description: Type of the credit card used in the order (e.g., Visa, MasterCard).
      - name: card_number
        description: Masked or anonymized number of the credit card used.
      - name: product_fk
        description: Foreign key referencing the product in the order.
        tests:
          - not_null
      - name: unit_price
        description: Unit price of the product at the time of sale.
      - name: discount
        description: Discount applied to the unit price.
      - name: row_num_per_order
        description: Row number per order to help in deduplication and metric filtering.
      -  name: order_quantity
         description: These are ordering orders responsible for the metrics
