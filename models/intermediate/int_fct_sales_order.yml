version: 2

models:
  - name: int_fct_sales_order
    description: >
      Intermediate model that joins and enriches sales order data, combining order headers,
      order details, credit card info, and sales reasons into a detailed grain of one row per sales order item.
    columns:
      - name: sales_order_fk
        description: Primary key referencing the sales order.
        tests:
          - not_null

      - name: customer_fk
        description: Foreign key referencing the customer who placed the order.
        tests:
          - not_null

      - name: address_fk
        description: Foreign key referencing the shipping/billing address.
        tests:
          - not_null

      - name: creditcard_fk
        description: Foreign key referencing the credit card used in the transaction.

      - name: salesperson_fk
        description: Foreign key referencing the salesperson responsible for the order.

      - name: status
        description: Status of the order (e.g., processed, shipped).
        tests:
          - accepted_values:
              values: [1, 2, 3, 4, 5]  # Ajuste conforme os poss√≠veis status do seu sistema

      - name: order_date
        description: Date the order was placed.
        tests:
          - not_null

      - name: gross_total_by_order
        description: Total gross value of the order before discounts.

      - name: net_total_by_order
        description: Total net value of the order after discounts.

      - name: total_quantity_by_order
        description: Total number of items in the order.

      - name: sales_reason_fk
        description: Foreign key referencing the reason for the order.

      - name: name_reason
        description: Name/description of the sales reason.

      - name: type_reason
        description: Type/category of the sales reason.

      - name: card_type
        description: Type of credit card used (e.g., Visa, MasterCard).

      - name: card_number
        description: Masked or last digits of the credit card number.

      - name: product_fk
        description: Foreign key referencing the product sold in the order.
        tests:
          - not_null

      - name: row_num_per_order
        description: Row number per order used for deduplication or selection logic.
