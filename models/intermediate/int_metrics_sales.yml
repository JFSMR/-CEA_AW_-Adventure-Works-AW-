version: 2

models:
  - name: int_metrics_sales
    description: |
      Modelo intermediário que agrega dados das tabelas de pedidos e detalhes, 
      calculando métricas como total de pedidos, quantidade total, total bruto e líquido.
    columns:
      - name: sales_item_sk
        description: "Chave substituta do item de venda."
        tests:
          - not_null
          - unique

      - name: sales_order_fk
        description: "Chave estrangeira para o pedido de venda."

      - name: customer_fk
        description: "Chave estrangeira do cliente."

      - name: address_fk
        description: "Chave estrangeira do endereço de entrega."

      - name: creditcard_fk
        description: "Chave estrangeira do cartão de crédito usado no pedido."

      - name: salesperson_fk
        description: "Chave estrangeira do vendedor responsável pelo pedido."

      - name: order_quantity
        description: "Quantidade de itens pedidos."
        tests:
          - not_null

      - name: unit_price
        description: "Preço unitário do produto."
        tests:
          - not_null

      - name: discount
        description: "Desconto aplicado no preço unitário."

      - name: status
        description: "Status do pedido."

      - name: order_date
        description: "Data do pedido."
        tests:
          - not_null

      - name: total_orders
        description: "Número total de pedidos distintos por item."
        tests:
          - not_null

      - name: total_quantity
        description: "Quantidade total vendida do item."
        tests:
          - not_null

      - name: gross_total
        description: "Valor bruto da venda (unit_price * order_quantity)."
        tests:
          - not_null

      - name: net_total
        description: "Valor líquido da venda (considerando desconto)."
        tests:
          - not_null
