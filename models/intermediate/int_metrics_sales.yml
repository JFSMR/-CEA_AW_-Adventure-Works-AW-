version: 2

models:
  - name: int_metrics_sales
    description: >
      Intermediate model that joins order header and order detail data to compute
      sales metrics. Includes revenue calculations, discounts, and dimensional references
      for analytics and reporting.

    columns:
      - name: sales_item_sk
        description: Surrogate key of the sales item
        tests:
          - not_null
          - unique

      - name: sales_order_id
        description: Alias for the foreign key to the sales order

      - name: product_fk
        description: Foreign key to the purchased product

      - name: customer_fk
        description: Foreign key to the customer who placed the order

      - name: address_fk
        description: Foreign key to the address associated with the order

      - name: creditcard_fk
        description: Foreign key to the credit card used in the transaction

      - name: salesperson_fk
        description: Foreign key to the salesperson responsible for the order

      - name: order_quantity
        description: Number of units ordered for the item

      - name: unit_price
        description: Price per unit of the item at the time of the order

      - name: discount
        description: Discount applied to the item (expressed as a decimal fraction)

      - name: status
        description: Current status code of the order

      - name: order_date
        description: Date on which the order was placed

      - name: total_orders
        description: Count of distinct orders related to the item

      - name: total_quantity
        description: Aggregated quantity of items in the group

      - name: gross_total
        description: Gross revenue before discounts (unit_price * order_quantity)

      - name: net_total
        description: Net revenue after applying discount (unit_price * order_quantity * (1 - discount))
